{% import 'molecules/link_view_datasource.html' as link_view_datasource with context %}
{% import 'atoms/caption_textstyle.html' as caption_textstyle with context %}
{% import 'atoms/subhead_02_textstyle.html' as subhead_02_textstyle with context %}
{% import 'atoms/footer_textstyle.html' as footer_textstyle with context %}
{% import 'atoms/footer_02_textstyle.html' as footer_02_textstyle with context %}
{% import 'atoms/icon_view_data_source_no_badge.html' as icon_view_data_source_no_badge with context %}
{% import 'atoms/icon_frame.html' as icon_frame with context %}

{%- macro render(graph_title="") -%}
  <div class="w-full relative overflow-hidden">
    <!-- drawer component -->
    <div
      id="drawer-disabled-backdrop"
      class="absolute top-0 left-0 z-40 lg:w-3/5 w-4/5 h-full p-8 overflow-y-auto transition-transform -translate-x-full bg-grey-900 opacity-95 dark:bg-gray-800 "
      tabindex="-1"
      aria-labelledby="drawer-disabled-backdrop-label"
    >
      <div class="flex flex-row justify-start items-center gap-3 mb-5">

        <div class="lg:w-6 lg:h-6 md:w-5 md:h-5 xs:w-4 xs:h-4">
        {{ icon_view_data_source_no_badge.render() }}
        </div>
        {% call subhead_02_textstyle.render(text_color="text-white") %}
        Data Source
        {% endcall %}
      </div>

      <hr  class="mb-7"/>
      <button
        type="button"
        data-drawer-hide="drawer-disabled-backdrop"
        aria-controls="drawer-disabled-backdrop"
        class="text-white bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 absolute top-2.5 end-2.5 inline-flex items-center justify-center dark:hover:bg-gray-600 dark:hover:text-white"
      >
        <svg
          class="w-3 h-3"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 14 14"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
          />
        </svg>
        <span class="sr-only">Close menu</span>
      </button>
      <div class="py-4 overflow-y-auto">
        <ul class="space-y-2 font-medium text-white">
          <li>
            <div class="flex flex-row justify-start items-center">
              {% call footer_textstyle.render(text_color="text-white") %}
                Agriculture-
              {% endcall %}
              <a
                >{% call footer_02_textstyle.render(text_color="text-white") %}
                  StatsNZ
                {% endcall %}</a
              >
            </div>
          </li>
          <li>
            <div class="flex flex-row justify-start items-center">
              {% call footer_textstyle.render(text_color="text-white") %}
                Transport-
              {% endcall %}
              <a
                >{% call footer_02_textstyle.render(text_color="text-white") %}
                  Central Otago District Council
                {% endcall %}</a
              >
            </div>
          </li>
          <li>
            <div class="flex flex-row justify-start items-center">
              {% call footer_textstyle.render(text_color="text-white") %}
                Energy-
              {% endcall %}
              <a
                >{% call footer_02_textstyle.render(text_color="text-white") %}
                  Aroura Engery
                {% endcall %}</a
              >
            </div>
          </li>
          <li>
            <div class="flex flex-row justify-start items-center">
              {% call footer_textstyle.render(text_color="text-white") %}
                Forestry-
              {% endcall %}
              <a
                >{% call footer_02_textstyle.render(text_color="text-white") %}
                  LUCAS QLDC Quality Life survey
                {% endcall %}</a
              >
            </div>
          </li>
        </ul>
      </div>
    </div>
    <!-- Top bar: view datasource link -->
    <div class="w-full rounded-t-3xl min-h-96">
      <div class="rounded-t-3xl bg-light-grey w-full px-12 py-6">
        {% call link_view_datasource.render() %}
        {% endcall %}
      </div>
    </div>

    <!-- Middle: graph -->
    <div>{{ caller() }}</div>

    <!-- bottom bar -->
    <div
      class="w-full px-12 py-6 bg-white rounded-b-3xl flex justify-start items-center gap-2.5 border-x-4 border-b-4 border-light-grey"
    >
      {% call caption_textstyle.render() %}
        {{ graph_title|safe }}
      {% endcall %}
    </div>
  </div>
{%- endmacro -%}
